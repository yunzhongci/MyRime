# Rime schema settings
# encoding: utf-8

schema:
  schema_id: xhup
  name: å°é¹¤éŸ³å½¢
  version: "v10.9v"
  author:
    - æ–¹æ¡ˆè®¾è®¡ï¼šä½•æµ·å³° <flypy@qq.com>
    - æ–¹æ¡ˆè°ƒæ•´ï¼šæ°´çŒ« <kchen0x@gmail.com>
    - æ¥è‡ªå‡‡é¹¤æ‹¼éŸ³
  description: |
    å°é¹¤éŸ³å½¢ä¸»ç è¡¨
  dependencies:
    - xhup_reverse

# ä½¿ç”¨é›¾å‡‡é»˜è®¤çš„æ ‡ç‚¹ç¬¦å·
punctuator:
  import_preset: default

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è‹±æ–‡ ]
  - name: emoji_suggestion
    states: [ "ğŸ˜£ï¸","ğŸ˜ï¸"]
    reset: 1
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
    reset: 0
  - name: transcription
    states: [ ç®€ä½“ , ç¹ä½“ ]
    reset: 0
  - name: ascii_punct
    states: [ "ã€‚ï¼Œ", "ï¼ï¼Œ" ]
    reset: 0
  - name: chaifen        # æ‹†å­—æ»¤é•œ
    states: [ ğŸ™ˆ, ğŸµ ]     # å¿«æ·é”® ã€ŒControl+Shift+Cã€
    reset: 0


engine:
  processors:
    - lua_processor@*xhup/shortcut_processor
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator                          # ç è¡¨
    - lua_translator@*mint_date_time_translator          # æ—¶é—´ã€æ—¥æœŸã€æ˜ŸæœŸã€æœˆä»½
    - lua_translator@*number_translator                  # é‡‘é¢å¤§å°å†™
    - lua_translator@*chineseLunarCalendar_translator    # å†œå†
    - lua_translator@*xhup/shortcut_translator  # Lua ç›´é€šè½¦
    - reverse_lookup_translator@xhup_reverse
    - history_translator@history                # é‡å¤ä¸Šå±
  filters:
    - simplifier
    - simplifier@simplification
    - simplifier@short_hints #æ»¤é•œ
    - uniquifier

# æ‹¼å†™è®¾å®š
speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz;'"    # ä¸ç›´æ¥ä¸Šå±çš„æ ‡ç‚¹
  initials: ';abcdefghijklmnopqrstuvwxyz'     # å¯ä»¥ä½œä¸ºç¬¬ä¸€ä½çš„å¼•å¯¼è¯
  finals: "'"
  # delimiter: " '"
  max_code_length: 4
  auto_select: true   #é¡¶å­—ä¸Šå±
  auto_select_pattern: ^;.$|^\w{4}$
  auto_clear: max_length #manual|auto|max_length ç©ºç æŒ‰ä¸‹ä¸€é”®ç¡®è®¤æ¸…å±|ç©ºç è‡ªåŠ¨æ¸…|è¾¾åˆ°æœ€é•¿ç æ—¶åç é¡¶ä¸Šæ¸…å±

# ç¿»è¯‘å™¨ï¼Œå°é¹¤éŸ³å½¢
translator:
  dictionary: xhup                # æŒ‚è½½è¯åº“ xhup.dict.yaml
  enable_charset_filter: false
  enable_sentence: false          # æ˜¯å¦å¯ç”¨é€ å¥æ¨¡å¼
  enable_completion: false        # ç¼–ç æç¤ºå¼€å…³
  enable_user_dict: false
  disable_user_dict_for_patterns:
    - "^z.*$"

# é‡å¤ä¸Šå±
history:
   input: ;f
   size: 1              # é‡å¤å‰å‡ æ¬¡ä¸Šå±
   initial_quality: 1   # é¦–é€‰

# ç®€ç¹è½¬æ¢å™¨
simplification:
  opencc_config: s2tw.json      # s2t.json | s2hk.json | s2tw.json | s2twp.json
  option_name: simplification
  tips: all                     # è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚

short_hints:
  opencc_config: short_hints.json
  option_name: short_hints
  show_in_comment: true #ä½œä¸ºæ³¨è§£åœ¨åé¢æ˜¾ç¤º
  comment_format:
   - xform/^/ã€”/
   - xform/$/ã€•/
  tips: all
  # tags:
  #   - abc
  #   - tiger
  #   - tigress
  #   - xhup
    # - reverse_lookup

# åæŸ¥è¯åº“
xhup_reverse:
  dictionary: xhup_reverse
  comment_format:
   # - xform/^/ã€”/
   # - xform/$/ã€•/
    - xform/ / /

# å¿«æ·é”®è®¾ç½®
key_binder:
  import_preset: default  # ä» default.yaml ç»§æ‰¿é€šç”¨çš„
  bindings:               # ä¸€äº›ä¸“ç”¨çš„å¿«æ·é”®
    - {accept: bracketleft, send: bracketleft, when: paging}        # æ³¨é”€[ä¸Šç¿»é¡µ
    - {accept: bracketright, send: bracketright, when: has_menu}    # æ³¨é”€]ä¸‹ç¿»é¡µ
    - {accept: comma, send: comma, when: paging}                    # æ³¨é”€é€—å·ç¿»é¡µ
    - {accept: period, send: period, when: has_menu}                # æ³¨é”€å¥å·ç¿»é¡µ
    - {accept: semicolon, send: '2', when: has_menu}                # åˆ†å·æ¬¡é€‰
  #  - {accept: Release+semicolon, send: semicolon, when: has_menu} # å¦‚å¯ç”¨æ­¤è¡Œï¼Œåˆ™åˆ†å·å¼•å¯¼ç¬¦å·åŠŸèƒ½æ— æ•ˆ
    - {accept: Release+period, send: period, when: composing}       # å¥å·é¡¶å±
    - {accept: Release+comma, send: comma, when: composing}         # é€—å·é¡¶å±
    - {accept: "Tab", send: Escape, when: composing}                # æ³¨é”€ Tab é”®ï¼ˆdefault å¯ä»¥é€šè¿‡ Tab æ¥åˆ‡æ¢å…‰æ ‡è‡³ä¸‹ä¸€ä¸ªæ‹¼éŸ³ï¼‰
    - {accept: "Shift_R", send: Escape, when: composing}            # æ³¨é”€å³ä¾§ Shift é”®ï¼Œç”¨æ¥è¿›è¡Œè¾“å…¥æ³•åˆ‡æ¢ä¸­è‹±ï¼ˆé…åˆ Karabinerï¼‰
    - {accept: "Shift+space", toggle: full_shape, when: always}     # åˆ‡æ¢å…¨åŠè§’
    - {accept: "Control+period", toggle: ascii_punct, when: always} # åˆ‡æ¢ä¸­è‹±æ ‡ç‚¹
    - {accept: "Control+j", toggle: simplification, when: always}   # åˆ‡æ¢ç®€ç¹

# è¯†åˆ«å™¨

recognizer:
  import_preset: default
  patterns:
    url: "^[a-z]+[.].+$"
    punct: "^/([0-9]0?|[a-zA-Z]+)$"
    wubi98_mint: "Uw[a-z]*'?$"
    stroke: "Ui[a-z]*'?$"
    radical_lookup: "Uu[a-z]*'?$"
    rmb: "^R[0-9]+[.]?[0-9]*"        # å“åº” lua_translator@number_translator è„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ä½œä¸ºè§¦å‘å‰ç¼€
    gregorian_to_lunar: "^N[0-9]{1,8}"  # å“åº” lua_translator@Chinese_lunar_calendar å…¬å†è½¬å†œå†ï¼Œè¾“å…¥ N20240115 å¾—åˆ°ã€ŒäºŒã€‡äºŒå››å¹´è…Šæœˆåˆäº”ã€ï¼Œè„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ä½œä¸ºè§¦å‘å‰ç¼€
    uppercase: ""  # è¦†å†™é»˜è®¤çš„ uppercase ä½¿å…¶å¯ä»¥åœ¨è¾“å…¥å¤§å†™åï¼Œè¾“å…¥æ•°å­—
key_binder:
  import_preset: default
  bindings:
    - {accept: "Control+Shift+E", toggle: emoji_suggestion, when: always}
    - {accept: "Control+Shift+exclam", toggle: transcription, when: has_menu}
    - {accept: "Control+Shift+1", toggle: transcription, when: has_menu}
    - {accept: "Control+Shift+C", toggle: chaifen, when: has_menu} # æ‹†å­—æ»¤é•œå¼€å…³
    - {accept: minus, send: Page_Up, when: paging}     # ä½¿ç”¨`-`è¿›è¡Œå‘ä¸Šç¿»é¡µï¼ˆç¬¬ä¸€é¡µæ—¶å€™æ— æ•ˆï¼‰
    - {accept: equal, send: Page_Down, when: has_menu} # ä½¿ç”¨`=`è¿›è¡Œå‘ä¸‹ç¿»é¡µ
    # Emacs é£æ ¼çš„å¿«æ·é”®
    - { when: composing, accept: Control+p, send: Up }     # composing æ—¶,Control+p ç­‰åŒäº Up é”®
    - { when: composing, accept: Control+n, send: Down }
    - { when: composing, accept: Control+b, send: Left }
    - { when: composing, accept: Control+f, send: Right }
    - { when: composing, accept: Control+a, send: Home }
    - { when: composing, accept: Control+e, send: End }
    - { when: composing, accept: Control+d, send: Delete }
    - { when: composing, accept: Control+k, send: Shift+Delete } # åˆ é™¤åˆ°è¡Œå°¾
    - { when: composing, accept: Control+g, send: Escape }       # é€€å‡ºç¼–ç 
    - { when: composing, accept: Alt+v, send: Page_Up }          # ç¿»é¡µ
    - { when: composing, accept: Control+v, send: Page_Down }
    # æŒ‰è¯ç§»åŠ¨å…‰æ ‡
    - { when: composing, accept: ISO_Left_Tab, send: Shift+Left } # ISO_Left_Tab æ˜¯ Shift+Tab
    - { when: composing, accept: Shift+Tab, send: Shift+Left }
    - { when: composing, accept: Tab, send: Shift+Right }
    # ç¿»é¡µ
    - { when: paging, accept: minus, send: Page_Up }             # ç¼–ç çª—å£ç¿»é¡µ
    - { when: has_menu, accept: equal, send: Page_Down }
    - { when: paging, accept: comma, send: Page_Up }             # å€™é€‰çª—å£ç¿»é¡µ
    - { when: has_menu, accept: period, send: Page_Down }
    - { when: predicting, accept: comma, send: comma }           # åœ¨é¢„ç¼–ç æ¨¡å¼ä¸‹,ä¸å½“ä½œå¿«æ·é”®
    - { when: predicting, accept: period, send: period }
    # åˆ‡æ¢çŠ¶æ€
    - { when: always, accept: Control+Shift+1, select: .next }   # åˆ‡æ¢è¾“å…¥æ–¹æ¡ˆ
    - { when: always, accept: Control+Shift+2, toggle: ascii_mode } # åˆ‡æ¢ä¸­/è¥¿æ–‡æ¨¡å¼
    - { when: always, accept: Control+Shift+3, toggle: full_shape } # åˆ‡æ¢å…¨è§’/åŠè§’
    - { when: always, accept: Control+Shift+4, toggle: transcription } # åˆ‡æ¢ç®€ä½“/ç¹ä½“
    - { when: always, accept: Control+Shift+5, toggle: extended_charset } # åˆ‡æ¢æ‰©å±•å­—ç¬¦
    - { when: always, accept: Shift+space, toggle: full_shape } # å¦ä¸€ç§åˆ‡æ¢å…¨è§’/åŠè§’çš„æ–¹å¼
    - { when: always, accept: Control+period, toggle: ascii_punct } # åˆ‡æ¢ä¸­/è¥¿æ–‡æ ‡ç‚¹

menu:
  page_size: 6      # å€™é€‰é¡¹æ•°



